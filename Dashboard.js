!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){a(t,e,n[e])}))}return t}function r(t){$("a.tooltip, .pw-tooltip",t).tooltip({position:{my:"center bottom",at:"center top"}}).hover((function(){var t=$(this);t.is("a")?t.addClass("ui-state-hover"):(t.data("pw-tooltip-cursor",t.css("cursor")),t.css("cursor","pointer")),t.addClass("pw-tooltip-hover"),t.css("cursor","pointer")}),(function(){var t=$(this);t.removeClass("pw-tooltip-hover ui-state-hover"),t.is("a")||t.css("cursor",t.data("pw-tooltip-cursor"))}))}function o(t){$(".tooltip, .pw-tooltip",t).each((function(){$(this).removeClass("tooltip pw-tooltip"),UIkit.tooltip($(this))}))}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;"undefined"!=typeof UIkit?o(t):r(t)}var s=function(){"use strict";function a(){t(this,a),this.selectors={panel:"[data-dashboard-panel]",tabs:"[data-dashboard-tabs]",tabLink:"[data-dashboard-tab]"}}var r,o,s;return r=a,o=[{key:"init",value:function(){var t=this;this.url=document.location.pathname+document.location.search,this.$panels=$(this.selectors.panel),this.$tabs=$(this.selectors.tabs),this.$panels.each((function(e,a){t.setupPanel($(a))})),this.$tabs.each((function(e,a){t.setupTabs($(a))})),this.setupReloadEvents(),this.setupAutoReload(),this.triggerDashboardReadyEvent()}},{key:"getPanelByKey",value:function(t){return this.$panels.filter("[data-key='".concat(t,"']")).first()}},{key:"triggerDashboardReadyEvent",value:function(){$(document).trigger("dashboard:ready")}},{key:"triggerPanelReadyEvent",value:function(t){return this.triggerPanelEvent(t,"panel")}},{key:"triggerPanelEvent",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=parseInt(t.data("key"),10),o=t.data("panel"),i=n({$element:t,key:r,panel:o},a),s=$.Event("dashboard:".concat(e)),l=$.Event("dashboard:".concat(e,"(").concat(o,")"));$(document).trigger(s,[i]),$(document).trigger(l,[i]);var c=s.isDefaultPrevented()||l.isDefaultPrevented();return!c}},{key:"setupTabs",value:function(t){var e=t.find(this.selectors.tabLink),a=function(t,e){var a=$(t).attr("href");$(t).attr("aria-current",e?"true":"false"),$(a).attr("aria-hidden",e?"false":"true")},n=function(t){e.each((function(t,e){return a(e,!1)})),a(t,!0)};n(e.eq(0)),e.on("click",(function(t){t.preventDefault(),n(t.target)})),t.attr("data-cloak",null)}},{key:"setupPanel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&i(t),this.triggerPanelReadyEvent(t)}},{key:"setupReloadEvents",value:function(){var t=this;$(document).on("reload",this.selectors.panel,(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.animate,r=a.params;t.reloadPanel($(e.target),{animate:n,params:r})}))}},{key:"setupAutoReload",value:function(){this.$panels.each((function(t,e){var a=$(e),n=parseInt(a.data("key"),10),r=parseInt(a.data("interval"),10);n>=0&&r>0&&(r=Math.max(2e3,r),setInterval((function(){a.trigger("reload")}),r))}))}},{key:"reloadPanel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.animate,r=void 0!==a&&a,o=e.params,i=void 0===o?null:o,s=this;if(t.length){var l=parseInt(t.data("key"),10),c=t.data("panel"),u=n({dashboard:1,key:l,panel:c},i||{});$.post(this.url,u,null,"text").done((function(e){var a=$(e);if(s.triggerPanelEvent(t,"reload",{$new:a})){var n=function(){t.html(a.html()),t.prop("className",a.prop("className")),a.filter("script").each((function(t,e){$.globalEval(e.text||e.textContent||e.innerHTML||"")})),s.setupPanel(t,!0)};r?t.children().fadeOut(400,(function(){n(),t.children().fadeIn(400)})):n()}})).fail((function(){console.error("Error fetching panel contents")}))}}}],o&&e(r.prototype,o),s&&e(r,s),a}();$((function(){(new s).init()}))}();