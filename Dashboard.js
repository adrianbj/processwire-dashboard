!function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),r.forEach((function(n){e(t,n,a[n])}))}return t}function a(t){var e=void 0===t?document:t;"undefined"!=typeof UIkit?function(t){$(".tooltip, .pw-tooltip",t).each((function(){$(this).removeClass("tooltip pw-tooltip"),UIkit.tooltip($(this))}))}(e):function(t){$("a.tooltip, .pw-tooltip",t).tooltip({position:{my:"center bottom",at:"center top"}}).hover((function(){var t=$(this);t.is("a")?t.addClass("ui-state-hover"):(t.data("pw-tooltip-cursor",t.css("cursor")),t.css("cursor","pointer")),t.addClass("pw-tooltip-hover"),t.css("cursor","pointer")}),(function(){var t=$(this);t.removeClass("pw-tooltip-hover ui-state-hover"),t.is("a")||t.css("cursor",t.data("pw-tooltip-cursor"))}))}(e)}var r=function(){"use strict";function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.selectors={panel:"[data-dashboard-panel]",tabs:"[data-dashboard-tabs]",tabLink:"[data-dashboard-tab]"}}var r,o,i;return r=e,(o=[{key:"init",value:function(){this.url=document.location.pathname,this.$panels=$(this.selectors.panel),this.$tabs=$(this.selectors.tabs),this.$panels.each(function(t,e){this.setupPanel($(e))}.bind(this)),this.$tabs.each(function(t,e){this.setupTabs($(e))}.bind(this)),this.setupReloadEvents(),this.setupAutoReload(),this.triggerDashboardReadyEvent()}},{key:"getPanelByKey",value:function(t){return this.$panels.filter("[data-key='".concat(t,"']")).first()}},{key:"triggerDashboardReadyEvent",value:function(){$(document).trigger("dashboard:ready")}},{key:"triggerPanelReadyEvent",value:function(t){return this.triggerPanelEvent(t,"panel")}},{key:"triggerPanelEvent",value:function(t,e,a){var r=void 0===a?{}:a,o=parseInt(t.data("key"),10),i=t.data("panel"),s=n({$element:t,key:o,panel:i},r),l=$.Event("dashboard:".concat(e)),c=$.Event("dashboard:".concat(e,"(").concat(i,")"));return $(document).trigger(l,[s]),$(document).trigger(c,[s]),!(l.isDefaultPrevented()||c.isDefaultPrevented())}},{key:"setupTabs",value:function(t){var e=t.find(this.selectors.tabLink),n=function(t,e){var n=$(t).attr("href");$(t).attr("aria-current",e?"true":"false"),$(n).attr("aria-hidden",e?"false":"true")},a=function(t){e.each((function(t,e){return n(e,!1)})),n(t,!0)};a(e.eq(0)),e.on("click",(function(t){t.preventDefault(),a(t.target)})),t.attr("data-cloak",null)}},{key:"setupPanel",value:function(t,e){void 0!==e&&e&&a(t),this.triggerPanelReadyEvent(t)}},{key:"setupReloadEvents",value:function(){$(document).on("reload",this.selectors.panel,function(t,e){var n=void 0===e?{}:e,a=n.animate,r=n.params;this.reloadPanel($(t.target),{animate:a,params:r})}.bind(this))}},{key:"setupAutoReload",value:function(){this.$panels.each((function(t,e){var n=$(e),a=parseInt(n.data("key"),10),r=parseInt(n.data("interval"),10);a>=0&&r>0&&(r=Math.max(2e3,r),setInterval((function(){n.trigger("reload")}),r))}))}},{key:"reloadPanel",value:function(t,e){var a=void 0===e?{}:e,r=a.animate,o=void 0!==r&&r,i=a.params,s=void 0===i?null:i;if(t.length){var l=n({dashboard:1,key:parseInt(t.data("key"),10),panel:t.data("panel")},s||{});$.post(this.url,l,null,"text").done(function(e){var n=$(e);if(this.triggerPanelEvent(t,"reload",{$new:n})){var a=function(){t.html(n.html()),t.prop("className",n.prop("className")),n.filter("script").each((function(t,e){$.globalEval(e.text||e.textContent||e.innerHTML||"")})),this.setupPanel(t,!0)}.bind(this);o?t.children().fadeOut(400,(function(){a(),t.children().fadeIn(400)})):a()}}.bind(this)).fail((function(){console.error("Error fetching panel contents")}))}}}])&&t(r.prototype,o),i&&t(r,i),e}();$((function(){(new r).init()}))}();